install.packages("pdflatex")
install.packages("tidyverse")
install.packages("lubridate")
install.packages("roxygen2")
install.packages("roxygen2")
install.packages("devtools")
devtools::use_package("dplyr")
library(devtools)
devtools::use_package("dplyr")
devtools::use_package("dplyr")
use_package("dplyr")
ls()
install.packages("janitor")
iox_folder <- svDialogs ::dlgDir()$res
iox_folder <- svDialogs ::dlgDir()$res
list_files <- list.files(iox_folder, full.names = TRUE)
files_imp <- list_files[grepl(pattern = "*iox.txt", list_files)]
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_select = "X7"
col_types = "c",
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_select = "X7",
col_types = "c"
)
library(vroom)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_select = "X7"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE
col_select = "X7"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7"
)
vroom(files_imp,
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_spec = "c"
)
vroom(files_imp,
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_types = "c"
)
lapply(files_imp, vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_types = "c"
)
lapply(files_imp,
vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_types = "c"
)
lapply(files_imp,
vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = c("subject"),
col_select = "X7",
col_types = "c"
)
vroom(files_imp,
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = "subject",
col_select = "X7",
col_types = "c"
)
lapply(files_imp, vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = "c"
)
lapply(files_imp, vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7"
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = "c"
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = NULL
)
vroom(files_imp[2],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
lapply(files_imp, vroom
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
lapply(files_imp, vroom,
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
vroom(files_imp[1],
skip = 15,
n_max = 1,
delim ="\t",
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
vroom(files_imp[1],
skip = 15,
n_max = 1,
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
vroom(files_imp[1],
skip = 15,
n_max = 1,
num_threads = 1,
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
# link_file <- svDialogs::dlgOpen()$res
iox_folder <- svDialogs ::dlgDir()$res
list_files <- list.files(iox_folder, full.names = TRUE)
files_imp <- list_files[grepl(pattern = "*iox.txt", list_files)]
if(length(files_imp) == 0) stop(svDialogs::dlgMessage("There are not iox files
Make sure to have files that end with iox.txt", type = "ok")$res)
# not sure why it appears that files have different columns.
# this is a workaround that
# extract name and drug form cell 16,7
subj_info  <- lapply(files_imp, vroom::vroom,
skip = 15,
n_max = 1,
delim = "\t",
col_names = FALSE,
col_select = "X7",
col_types = c(X7 = "c")
)
subj_info2 <- lapply(subj_info, function(x) unlist(x)[[1]][1])
subj <- stringr::str_extract(subj_info2, "[[:digit:]]+")
drug <- stringr::str_extract(subj_info2, "[[:alpha:]]{4,}")
subj_drug <- paste(subj, drug, sep = "_")
vent <- vroom::vroom(files_imp,
delim ="\t",
skip = 41,
col_names = FALSE,
col_types = list(
X6 = "c",
X7 = "c",
X8 = "c",
X9 = "c"
),
id = "id"
)
names(vent) <- unlist(vent_head)
#time in seconds from cpu_time, unfortunately the other columns reset after 1h to 0
vent$cpu_date <- as.Date(vent$cpu_date, "%d-%b-%y")
vent$cpu_date
vent <- vroom::vroom(files_imp,
delim ="\t",
skip = 41,
col_names = FALSE,
col_types = list(
X6 = "c",
X7 = "c",
X8 = "c",
X9 = "c"
),
id = "id"
)
load("~/Documents/R_projects/rvent/R/sysdata.rda")
names(vent) <- unlist(vent_head)
#time in seconds from cpu_time, unfortunately the other columns reset after 1h to 0
vent$cpu_date <- as.Date(vent$cpu_date, "%d-%b-%y")
vent <- tidyr::separate(vent, cpu_time, c("cpu_time", "time_ms"), sep ="\\.")
vent$cpu_time <- as.POSIXct(vent$cpu_time, format = "%H:%M:%S %p")
vent[, "time_s"] <- as.numeric(vent$time_ms)/1000 +
as.numeric(format(vent$cpu_time, '%S')) +
as.numeric(format(vent$cpu_time, '%M')) *60 +
as.numeric(format(vent$cpu_time, '%H')) *3600
# recode
vent_id <- as.character(unique(vent$id))
id_recode <- subj_drug[seq_along(vent_id)]
newnames <- setNames(id_recode, vent_id)
vent[,"subj_drug"] <- newnames[vent$id]
vent$subj_drug <-as.factor(newnames[vent$id])
vent$string_type == "comment"
vent$string_type
vent$string_type == "comment"
vent$string_type == c("comment")
vent$string_type <- tidyr::replace_na(vent$string_type, 0)
vent$string_type == c("comment")
unique(vent$info[vent$string_type == c("comment")])
na.omit(unique(vent$info[vent$string_type == c("comment")]))
na.omit(unique(vent$info[vent$string_type == c("comment")]))
unlist(na.omit(unique(vent$info[vent$string_type == c("comment")])))
comments <- unique(vent$info[vent$string_type == c("comment")])
comments[!is.na(comments)]
comments <- comments[!is.na(comments)]
svDialogs::dlgList(comments, multiple=TRUE, title = "Select comments of drug administration")
svDialogs::dlgList(comments, multiple=TRUE, title = "Select comments of drug administration", gui = .GUI)
svDialogs::dlgList.nativeGUI(comments, multiple=TRUE, title = "Select comments of drug administration")
svDialogs::dlgList.nativeGUI(comments, multiple=TRUE, title = "Select comments of drug administration")
svDialogs::dlgList(comments, multiple=TRUE, title = "Select comments of drug administration")$res
devtools::install_github("SciViews/svGUI")
devtools::install_github("SciViews/svDialogs")
svDialogs::dlgList(comments, multiple=TRUE, title = "Select comments of drug administration")$res
3
3
svDialogs::dlgList(comments, multiple=TRUE, title = "Select comments of drug administration")$res
svDialogs::dlgList(1:5, multiple=TRUE, title = "Select comments of drug administration")$res
library(svGUI)
svDialogs::dlgList(1:5, multiple=TRUE, title = "Select comments of drug administration")$res
1
library(svDialogs)
dlg_list(1:5)
library(svDialogs)
library(svGUI)
dlgMessage("There are not iox files
Make sure to have files that end with iox.txt", type = "ok")$res)
dlgMessage("prova")
dlgList(c("ab", "CZ"))
